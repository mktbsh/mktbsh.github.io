var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function c(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function l(e){return e&&c(e.destroy)?e.destroy:t}const u="undefined"!=typeof window;let a=u?()=>window.performance.now():()=>Date.now(),d=u?t=>requestAnimationFrame(t):t;const f=new Set;function p(t){f.forEach((e=>{e.c(t)||(f.delete(e),e.f())})),0!==f.size&&d(p)}function m(t,e){t.appendChild(e)}function g(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e.host?e:document}function h(t){const e=w("style");return function(t,e){m(t.head||t,e)}(g(t),e),e}function $(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode.removeChild(t)}function w(t){return document.createElement(t)}function y(t){return document.createTextNode(t)}function v(){return y(" ")}function x(){return y("")}function k(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function _(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const C=new Set;let A,E=0;function S(t,e,n,o,r,c,s,i=0){const l=16.666/o;let u="{\n";for(let t=0;t<=1;t+=l){const o=e+(n-e)*c(t);u+=100*t+`%{${s(o,1-o)}}\n`}const a=u+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(a)}_${i}`,f=g(t);C.add(f);const p=f.__svelte_stylesheet||(f.__svelte_stylesheet=h(t).sheet),m=f.__svelte_rules||(f.__svelte_rules={});m[d]||(m[d]=!0,p.insertRule(`@keyframes ${d} ${a}`,p.cssRules.length));const $=t.style.animation||"";return t.style.animation=`${$?`${$}, `:""}${d} ${o}ms linear ${r}ms 1 both`,E+=1,d}function R(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),r=n.length-o.length;r&&(t.style.animation=o.join(", "),E-=r,E||d((()=>{E||(C.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),C.clear())})))}function j(t){A=t}function L(){if(!A)throw new Error("Function called outside component initialization");return A}function D(t){L().$$.on_mount.push(t)}function M(t){L().$$.on_destroy.push(t)}function z(t,e){L().$$.context.set(t,e)}function U(t){return L().$$.context.get(t)}const O=[],K=[],T=[],N=[],P=Promise.resolve();let W=!1;function q(t){T.push(t)}let B=!1;const I=new Set;function F(){if(!B){B=!0;do{for(let t=0;t<O.length;t+=1){const e=O[t];j(e),H(e.$$)}for(j(null),O.length=0;K.length;)K.pop()();for(let t=0;t<T.length;t+=1){const e=T[t];I.has(e)||(I.add(e),e())}T.length=0}while(O.length);for(;N.length;)N.pop()();W=!1,B=!1,I.clear()}}function H(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}let Y;function Z(t,e,n){t.dispatchEvent(function(t,e,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,!1,e),o}(`${e?"intro":"outro"}${n}`))}const G=new Set;let J;function Q(){J={r:0,c:[],p:J}}function V(){J.r||r(J.c),J=J.p}function X(t,e){t&&t.i&&(G.delete(t),t.i(e))}function tt(t,e,n,o){if(t&&t.o){if(G.has(t))return;G.add(t),J.c.push((()=>{G.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const et={duration:0};function nt(n,o,s,i){let l=o(n,s),u=i?0:1,m=null,g=null,h=null;function $(){h&&R(n,h)}function b(t,e){const n=t.b-u;return e*=Math.abs(n),{a:u,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function w(o){const{delay:c=0,duration:s=300,easing:i=e,tick:w=t,css:y}=l||et,v={start:a()+c,b:o};o||(v.group=J,J.r+=1),m||g?g=v:(y&&($(),h=S(n,u,o,s,c,i,y)),o&&w(0,1),m=b(v,s),q((()=>Z(n,o,"start"))),function(t){let e;0===f.size&&d(p),new Promise((n=>{f.add(e={c:t,f:n})}))}((t=>{if(g&&t>g.start&&(m=b(g,s),g=null,Z(n,m.b,"start"),y&&($(),h=S(n,u,m.b,m.duration,0,i,l.css))),m)if(t>=m.end)w(u=m.b,1-u),Z(n,m.b,"end"),g||(m.b?$():--m.group.r||r(m.group.c)),m=null;else if(t>=m.start){const e=t-m.start;u=m.a+m.d*i(e/m.duration),w(u,1-u)}return!(!m&&!g)})))}return{run(t){c(l)?(Y||(Y=Promise.resolve(),Y.then((()=>{Y=null}))),Y).then((()=>{l=l(),w(t)})):w(t)},end(){$(),m=g=null}}}function ot(t,e){tt(t,1,1,(()=>{e.delete(t.key)}))}function rt(t){t&&t.c()}function ct(t,e,o,s){const{fragment:i,on_mount:l,on_destroy:u,after_update:a}=t.$$;i&&i.m(e,o),s||q((()=>{const e=l.map(n).filter(c);u?u.push(...e):r(e),t.$$.on_mount=[]})),a.forEach(q)}function st(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function it(t,e){-1===t.$$.dirty[0]&&(O.push(t),W||(W=!0,P.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function lt(e,n,c,s,i,l,u,a=[-1]){const d=A;j(e);const f=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:i,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:n.context||[]),callbacks:o(),dirty:a,skip_bound:!1,root:n.target||d.$$.root};u&&u(f.root);let p=!1;if(f.ctx=c?c(e,n.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return f.ctx&&i(f.ctx[t],f.ctx[t]=r)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](r),p&&it(e,t)),n})):[],f.update(),p=!0,r(f.before_update),f.fragment=!!s&&s(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(b)}else f.fragment&&f.fragment.c();n.intro&&X(e.$$.fragment),ct(e,n.target,n.anchor,n.customElement),F()}j(d)}class ut{$destroy(){st(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var at=(t,e)=>{const n=e=>{let n={};Array.isArray(e)?e.forEach((t=>{n={...n,...t}})):n=e,Object.entries(n).forEach((([e,n])=>{e=e.replace(/[A-Z]/,(t=>"-"+t.toLowerCase())),t.style.setProperty(e,n)}))};return n(e),{update:n}};function dt(e){let n,o,s;return{c(){n=w("button"),n.textContent="🔓",_(n,"type","button")},m(t,r){$(t,n,r),o||(s=[l(at.call(null,n,{background:"none",border:"none",cursor:"pointer",fontSize:"28px",lineHeight:1,margin:"4px",textAlign:"center",padding:"4px",position:"absolute",top:"10%",right:0,zIndex:9998})),k(n,"click",(function(){c(e[0])&&e[0].apply(this,arguments)}))],o=!0)},p(t,[n]){e=t},i:t,o:t,d(t){t&&b(n),o=!1,r(s)}}}function ft(t,e,n){let{onClick:o}=e;return t.$$set=t=>{"onClick"in t&&n(0,o=t.onClick)},[o]}class pt extends ut{constructor(t){super(),lt(this,t,ft,dt,s,{onClick:0})}}function mt(t){const e=t-1;return e*e*e+1}function gt(t,{delay:e=0,duration:n=400,easing:o=mt,x:r=0,y:c=0,opacity:s=0}={}){const i=getComputedStyle(t),l=+i.opacity,u="none"===i.transform?"":i.transform,a=l*(1-s);return{delay:e,duration:n,easing:o,css:(t,e)=>`\n\t\t\ttransform: ${u} translate(${(1-t)*r}px, ${(1-t)*c}px);\n\t\t\topacity: ${l-a*e}`}}function ht(e){let n,o,s,i;return{c(){n=w("button"),o=y(e[0]),_(n,"type","button")},m(t,r){$(t,n,r),m(n,o),s||(i=[l(at.call(null,n,{fontSize:"20px",padding:"0 4px",margin:"4px"})),k(n,"click",(function(){c(e[1])&&e[1].apply(this,arguments)}))],s=!0)},p(t,[n]){e=t,1&n&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(o,e[0])},i:t,o:t,d(t){t&&b(n),s=!1,r(i)}}}function $t(t,e,n){let{emoji:o}=e,{onClick:r}=e;return t.$$set=t=>{"emoji"in t&&n(0,o=t.emoji),"onClick"in t&&n(1,r=t.onClick)},[o,r]}class bt extends ut{constructor(t){super(),lt(this,t,$t,ht,s,{emoji:0,onClick:1})}}function wt(e){let n,o,s;return{c(){n=w("button"),n.textContent="🔐",_(n,"type","button")},m(t,r){$(t,n,r),o||(s=[l(at.call(null,n,{background:"none",border:"none",cursor:"pointer",fontSize:"28px",lineHeight:1,margin:"4px",textAlign:"center",padding:"4px",position:"absolute",top:0,left:0})),k(n,"click",(function(){c(e[0])&&e[0].apply(this,arguments)}))],o=!0)},p(t,[n]){e=t},i:t,o:t,d(t){t&&b(n),o=!1,r(s)}}}function yt(t,e,n){let{onClick:o}=e;return t.$$set=t=>{"onClick"in t&&n(0,o=t.onClick)},[o]}class vt extends ut{constructor(t){super(),lt(this,t,yt,wt,s,{onClick:0})}}const xt=t=>{const e=document.createElement("canvas");return e.style.cssText="width:100%",e.setAttribute("width",`${t.videoWidth}`),e.setAttribute("height",`${t.videoHeight}`),e.getContext("2d").drawImage(t,0,0,e.width,e.height),e},kt=(t=1e3)=>{const e=new Date;for(;;)if(Date.now()-e.getTime()>t){console.log(Date.now()-e.getTime()+"ms経過。Sleep終了");break}},_t=[];const Ct=(()=>{const{subscribe:e,set:n,update:o}=function(e,n=t){let o;const r=new Set;function c(t){if(s(e,t)&&(e=t,o)){const t=!_t.length;for(const t of r)t[1](),_t.push(t,e);if(t){for(let t=0;t<_t.length;t+=2)_t[t][0](_t[t+1]);_t.length=0}}}return{set:c,update:function(t){c(t(e))},subscribe:function(s,i=t){const l=[s,i];return r.add(l),1===r.size&&(o=n(c)||t),s(e),()=>{r.delete(l),0===r.size&&(o(),o=null)}}}}([]),r=t=>o((e=>e.filter((e=>e.id!==t))));return{subscribe:e,add:t=>o((e=>[t,...e])),remove:r,reset:()=>n([]),download:(t,e)=>{((t,e)=>{new Promise(((n,o)=>{try{const o=document.createElement("a");o.download=`${t}.png`,o.href=e,o.click(),o.remove(),n()}catch(t){}}))})(t,e),r(t)}}})();function At(e){let n,o,c,s,i,u,a=e[2]&&function(e){let n,o,r;return{c(){n=w("button"),n.textContent="💾"},m(t,c){$(t,n,c),o||(r=k(n,"click",e[4]),o=!0)},p:t,d(t){t&&b(n),o=!1,r()}}}(e);return{c(){n=w("div"),o=w("button"),o.textContent="🗑",c=v(),a&&a.c()},m(t,r){$(t,n,r),m(n,o),m(n,c),a&&a.m(n,null),i||(u=[k(o,"click",e[3]),l(s=at.call(null,n,{position:"absolute",top:0,left:0,zIndex:2}))],i=!0)},p(t,e){t[2]&&a.p(t,e)},d(t){t&&b(n),a&&a.d(),i=!1,r(u)}}}function Et(e){let n,o,r,c=e[1]&&At(e);return{c(){n=w("div"),c&&c.c()},m(t,s){$(t,n,s),c&&c.m(n,null),e[6](n),o||(r=l(at.call(null,n,{width:"100%",position:"relative"})),o=!0)},p(t,[e]){t[1]?c?c.p(t,e):(c=At(t),c.c(),c.m(n,null)):c&&(c.d(1),c=null)},i:t,o:t,d(t){t&&b(n),c&&c.d(),e[6](null),o=!1,r()}}}function St(t,e,n){let o,{capture:r}=e,c=U("blobWorker"),s=U("canDownload"),i=!1;D((()=>{o.appendChild(r.canvas),n(1,i=!0)}));return t.$$set=t=>{"capture"in t&&n(5,r=t.capture)},[o,i,s,()=>{Ct.remove(r.id)},()=>{c.postMessage(r)},r,function(t){K[t?"unshift":"push"]((()=>{o=t,n(0,o)}))}]}class Rt extends ut{constructor(t){super(),lt(this,t,St,Et,s,{capture:5})}}function jt(t,e,n){const o=t.slice();return o[10]=e[n],o}function Lt(e){let n,o,c,s,i,u,a,d,f,p,g,h,y,x,k,_=[],C=new Map;o=new vt({props:{onClick:e[6]}}),i=new bt({props:{emoji:"📸",onClick:e[3]}});let A=e[2]&&function(e){let n,o;return n=new bt({props:{emoji:"💾",onClick:e[4]}}),{c(){rt(n.$$.fragment)},m(t,e){ct(n,t,e),o=!0},p:t,i(t){o||(X(n.$$.fragment,t),o=!0)},o(t){tt(n.$$.fragment,t),o=!1},d(t){st(n,t)}}}(e);d=new bt({props:{emoji:"🗑",onClick:e[7]}});let E=e[1];const S=t=>t[10].id;for(let t=0;t<E.length;t+=1){let n=jt(e,E,t),o=S(n);C.set(o,_[t]=Dt(o,n))}return{c(){n=w("div"),rt(o.$$.fragment),c=v(),s=w("div"),rt(i.$$.fragment),u=v(),A&&A.c(),a=v(),rt(d.$$.fragment),p=v();for(let t=0;t<_.length;t+=1)_[t].c()},m(t,e){$(t,n,e),ct(o,n,null),m(n,c),m(n,s),ct(i,s,null),m(s,u),A&&A.m(s,null),m(s,a),ct(d,s,null),m(n,p);for(let t=0;t<_.length;t+=1)_[t].m(n,null);y=!0,x||(k=[l(f=at.call(null,s,{textAlign:"center",borderRadius:"3px",padding:"4px",marginBottom:"1rem"})),l(g=at.call(null,n,{position:"fixed",top:"10%",right:0,height:"100%",padding:"0.5rem 1rem",borderLeft:"1 solid #aaa",background:"#fff",overflowY:"auto",width:"375px",border:"1px solid #000",zIndex:9999}))],x=!0)},p(t,e){const r={};1&e&&(r.onClick=t[6]),o.$set(r),t[2]&&A.p(t,e),2&e&&(E=t[1],Q(),_=function(t,e,n,o,r,c,s,i,l,u,a,d){let f=t.length,p=c.length,m=f;const g={};for(;m--;)g[t[m].key]=m;const h=[],$=new Map,b=new Map;for(m=p;m--;){const t=d(r,c,m),i=n(t);let l=s.get(i);l?o&&l.p(t,e):(l=u(i,t),l.c()),$.set(i,h[m]=l),i in g&&b.set(i,Math.abs(m-g[i]))}const w=new Set,y=new Set;function v(t){X(t,1),t.m(i,a),s.set(t.key,t),a=t.first,p--}for(;f&&p;){const e=h[p-1],n=t[f-1],o=e.key,r=n.key;e===n?(a=e.first,f--,p--):$.has(r)?!s.has(o)||w.has(o)?v(e):y.has(r)?f--:b.get(o)>b.get(r)?(y.add(o),v(e)):(w.add(r),f--):(l(n,s),f--)}for(;f--;){const e=t[f];$.has(e.key)||l(e,s)}for(;p;)v(h[p-1]);return h}(_,e,S,1,t,E,C,n,ot,Dt,null,jt),V())},i(t){if(!y){X(o.$$.fragment,t),X(i.$$.fragment,t),X(A),X(d.$$.fragment,t);for(let t=0;t<E.length;t+=1)X(_[t]);q((()=>{h||(h=nt(n,gt,{x:375,opacity:1},!0)),h.run(1)})),y=!0}},o(t){tt(o.$$.fragment,t),tt(i.$$.fragment,t),tt(A),tt(d.$$.fragment,t);for(let t=0;t<_.length;t+=1)tt(_[t]);h||(h=nt(n,gt,{x:375,opacity:1},!1)),h.run(0),y=!1},d(t){t&&b(n),st(o),st(i),A&&A.d(),st(d);for(let t=0;t<_.length;t+=1)_[t].d();t&&h&&h.end(),x=!1,r(k)}}}function Dt(t,e){let n,o,r;return o=new Rt({props:{capture:e[10]}}),{key:t,first:null,c(){n=x(),rt(o.$$.fragment),this.first=n},m(t,e){$(t,n,e),ct(o,t,e),r=!0},p(t,n){e=t;const r={};2&n&&(r.capture=e[10]),o.$set(r)},i(t){r||(X(o.$$.fragment,t),r=!0)},o(t){tt(o.$$.fragment,t),r=!1},d(t){t&&b(n),st(o,t)}}}function Mt(t){let e,n,o=t[0]&&Lt(t);return{c(){o&&o.c(),e=x()},m(t,r){o&&o.m(t,r),$(t,e,r),n=!0},p(t,[n]){t[0]?o?(o.p(t,n),1&n&&X(o,1)):(o=Lt(t),o.c(),X(o,1),o.m(e.parentNode,e)):o&&(Q(),tt(o,1,1,(()=>{o=null})),V())},i(t){n||(X(o),n=!0)},o(t){tt(o),n=!1},d(t){o&&o.d(t),t&&b(e)}}}function zt(t,e,n){let o;i(t,Ct,(t=>n(1,o=t)));let{show:r=!1}=e,{video:c}=e;const s=U("canDownload"),{postMessage:l}=U("blobWorker"),u=()=>{var t;Ct.add((t=c,{id:Date.now().toString(),canvas:xt(t)}))},a=t=>{if(t.shiftKey)return t.metaKey?(console.log("pressed ShiftKey & MetaKey => capture"),u()):t.altKey?(console.log("pressed AltKey & MetaKey => remove last capture"),Ct.remove(o[0].id)):void 0};D((()=>{window.addEventListener("keydown",a)})),M((()=>{window.removeEventListener("keydown",a)}));return t.$$set=t=>{"show"in t&&n(0,r=t.show),"video"in t&&n(5,c=t.video)},[r,o,s,u,()=>{o.forEach((t=>{l(t),kt(100)}))},c,()=>n(0,r=!1),()=>{Ct.reset()}]}class Ut extends ut{constructor(t){super(),lt(this,t,zt,Mt,s,{show:0,video:5})}}var Ot=()=>{self.onmessage=t=>{const{type:e,id:n,blob:o}=t.data;switch(e){case"DATA_URL":const t=new FileReader;t.readAsDataURL(o),t.onload=()=>{const e=t.result;postMessage({id:n,dataURL:e})}}}};const Kt=()=>{const t=(t=>{const e=t.toString(),n=new Blob([`(${e})()`]),o=URL.createObjectURL(n),r=new Worker(o);return r&&URL.revokeObjectURL(o),r})(Ot);t.onmessage=t=>{const{id:e,dataURL:n}=t.data;Ct.download(e,n)};return{postMessage:async e=>{const n=await(o=e.canvas,new Promise(((t,e)=>{o.toBlob((e=>t(e)))})));var o;t.postMessage({type:"DATA_URL",id:e.id,blob:n})},terminate:()=>t.terminate()}};function Tt(t){let e,n,o,r;return e=new pt({props:{onClick:t[3]}}),o=new Ut({props:{show:t[0],video:t[1]}}),{c(){rt(e.$$.fragment),n=v(),rt(o.$$.fragment)},m(t,c){ct(e,t,c),$(t,n,c),ct(o,t,c),r=!0},p(t,[n]){const r={};1&n&&(r.onClick=t[3]),e.$set(r);const c={};1&n&&(c.show=t[0]),o.$set(c)},i(t){r||(X(e.$$.fragment,t),X(o.$$.fragment,t),r=!0)},o(t){tt(e.$$.fragment,t),tt(o.$$.fragment,t),r=!1},d(t){st(e,t),t&&b(n),st(o,t)}}}function Nt(t,e,n){let{host:o}=e;console.log(o);let r=!0,c=(t=>{const e=document.querySelectorAll("video");switch(console.log(e),t){case"www.xvideos.com":{let t=null;return e.forEach((e=>{e.src.includes("blob")&&(t=e)})),t}case"jp.pornhub.com":const t=Array.from(e),n=t.pop();return console.log("last.currentSrc",n.currentSrc),n.currentSrc?n:t.pop();case"www.youtube.com":case"jp.spankbang.com":case"localhost":default:return e[0]}})(o);const s=(t=>{const e=xt(t);try{const t=e.toDataURL("image/jpeg",0);return console.log("allowCors[ok]",t),!0}catch(t){return console.log("allowCors[ng]",t),!1}finally{e.remove()}})(c);console.log("canDownload",s),z("canDownload",s);const i=Kt();z("blobWorker",i),M((()=>{i.terminate()}));return t.$$set=t=>{"host"in t&&n(2,o=t.host)},[r,c,o,()=>n(0,r=!r)]}class Pt extends ut{constructor(t){super(),lt(this,t,Nt,Tt,s,{host:2})}}return(()=>{kt(3e3);return document.querySelectorAll("video").length?new Pt({target:document.body,props:{host:window.location.hostname}}):null})()}();
