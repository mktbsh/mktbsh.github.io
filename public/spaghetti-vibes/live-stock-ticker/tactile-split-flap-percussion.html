<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@500;700&family=Inter:wght@400;800&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg: #0a0a0b;
        --surface: #141416;
        --flap-bg: #1e1e20;
        --text-primary: #f4f4f5;
        --text-secondary: #71717a;
        --accent-green: #22c55e;
        --accent-red: #ef4444;
        --hinge: rgba(0, 0, 0, 0.4);
        --depth-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.7);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background-color: var(--bg);
        color: var(--text-primary);
        font-family: "Inter", sans-serif;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        overflow: hidden;
        letter-spacing: -0.02em;
      }

      .ticker-container {
        width: 100%;
        max-width: 1200px;
        padding: 40px;
        display: flex;
        flex-direction: column;
        gap: 60px;
      }

      header {
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
        padding-bottom: 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      }

      .market-status {
        font-size: 12px;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 0.2em;
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--text-secondary);
      }

      .market-status::before {
        content: "";
        width: 8px;
        height: 8px;
        background: var(--accent-green);
        border-radius: 50%;
        box-shadow: 0 0 10px var(--accent-green);
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          opacity: 1;
        }
        50% {
          opacity: 0.4;
        }
        100% {
          opacity: 1;
        }
      }

      .board {
        display: flex;
        flex-direction: column;
        gap: 32px;
      }

      .stock-row {
        display: grid;
        grid-template-columns: 180px 1fr auto;
        align-items: center;
        gap: 40px;
      }

      .symbol-area {
        display: flex;
        flex-direction: column;
      }

      .symbol {
        font-size: 42px;
        font-weight: 800;
        color: var(--text-primary);
      }

      .company {
        font-size: 14px;
        color: var(--text-secondary);
        font-family: "JetBrains Mono", monospace;
      }

      .flap-display {
        display: flex;
        gap: 4px;
      }

      .flap {
        position: relative;
        width: 48px;
        height: 72px;
        background: var(--flap-bg);
        border-radius: 4px;
        font-family: "JetBrains Mono", monospace;
        font-size: 48px;
        font-weight: 700;
        line-height: 72px;
        text-align: center;
        perspective: 300px;
        box-shadow: var(--depth-shadow);
        overflow: hidden;
      }

      /* The horizontal split line */
      .flap::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 0;
        width: 100%;
        height: 2px;
        background: var(--hinge);
        z-index: 10;
        transform: translateY(-50%);
      }

      .flap-inner {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
      }

      .flap-content {
        position: absolute;
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .animating .flap-inner {
        animation: flip 0.4s cubic-bezier(0.45, 0, 0.55, 1);
      }

      @keyframes flip {
        0% {
          transform: rotateX(0);
        }
        50% {
          transform: rotateX(-90deg);
          filter: brightness(1.5);
        }
        100% {
          transform: rotateX(0);
        }
      }

      .change-indicator {
        font-family: "JetBrains Mono", monospace;
        font-size: 24px;
        font-weight: 700;
        padding: 8px 16px;
        border-radius: 4px;
        min-width: 120px;
        text-align: right;
        transition: all 0.3s ease;
      }

      .up {
        color: var(--accent-green);
      }
      .down {
        color: var(--accent-red);
      }

      .grain {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        opacity: 0.04;
        z-index: 100;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3ExternalLink %3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
      }
    </style>
  </head>
  <body>
    <div class="grain"></div>

    <div class="ticker-container">
      <header>
        <div>
          <h1
            style="
              font-size: 14px;
              text-transform: uppercase;
              letter-spacing: 0.3em;
              color: var(--text-secondary);
              margin-bottom: 8px;
            "
          >
            Global Exchange
          </h1>
          <p style="font-size: 32px; font-weight: 800">Real-time Indices</p>
        </div>
        <div class="market-status">Market Open</div>
      </header>

      <main class="board">
        <!-- Row 1 -->
        <div class="stock-row" id="row-nvda">
          <div class="symbol-area">
            <span class="symbol">NVDA</span>
            <span class="company">NVIDIA CORP.</span>
          </div>
          <div class="flap-display" data-value="124.58">
            <!-- Flaps generated by JS -->
          </div>
          <div class="change-indicator up">+2.41%</div>
        </div>

        <!-- Row 2 -->
        <div class="stock-row" id="row-aapl">
          <div class="symbol-area">
            <span class="symbol">AAPL</span>
            <span class="company">APPLE INC.</span>
          </div>
          <div class="flap-display" data-value="226.12"></div>
          <div class="change-indicator down">-0.14%</div>
        </div>

        <!-- Row 3 -->
        <div class="stock-row" id="row-tsla">
          <div class="symbol-area">
            <span class="symbol">TSLA</span>
            <span class="company">TESLA, INC.</span>
          </div>
          <div class="flap-display" data-value="213.90"></div>
          <div class="change-indicator up">+5.12%</div>
        </div>
      </main>
    </div>

    <script>
      const symbols = ["nvda", "aapl", "tsla"];

      function createFlaps(rowId, value) {
        const container = document.querySelector(`#row-${rowId} .flap-display`);
        container.innerHTML = "";
        const chars = value.toString().split("");

        chars.forEach((char, index) => {
          const flap = document.createElement("div");
          flap.className = "flap";
          flap.innerHTML = `
                    <div class="flap-inner">
                        <div class="flap-content">${char}</div>
                    </div>
                `;
          container.appendChild(flap);
        });
      }

      function updateFlaps(rowId, newValue) {
        const container = document.querySelector(`#row-${rowId} .flap-display`);
        const flaps = container.querySelectorAll(".flap");
        const newChars = newValue.toString().split("");

        newChars.forEach((char, i) => {
          if (flaps[i] && flaps[i].innerText !== char) {
            setTimeout(() => {
              flaps[i].classList.add("animating");
              setTimeout(() => {
                flaps[i].querySelector(".flap-content").innerText = char;
              }, 200);
              setTimeout(() => {
                flaps[i].classList.remove("animating");
              }, 400);
            }, i * 50); // Staggered percussion effect
          }
        });
      }

      // Initialize
      symbols.forEach((s) => {
        const val = document.querySelector(`#row-${s} .flap-display`).dataset
          .value;
        createFlaps(s, val);
      });

      // Simulate Live Data
      setInterval(() => {
        const randomSymbol =
          symbols[Math.floor(Math.random() * symbols.length)];
        const display = document.querySelector(
          `#row-${randomSymbol} .flap-display`,
        );
        let currentVal = parseFloat(display.dataset.value);

        // Random price movement
        const change = (Math.random() - 0.5) * 2;
        const newVal = (currentVal + change).toFixed(2);

        display.dataset.value = newVal;
        updateFlaps(randomSymbol, newVal);

        // Update Percentage UI
        const indicator = document.querySelector(
          `#row-${randomSymbol} .change-indicator`,
        );
        const perc = (Math.random() * 5).toFixed(2);
        const isUp = Math.random() > 0.4;
        indicator.innerText = `${isUp ? "+" : "-"}${perc}%`;
        indicator.className = `change-indicator ${isUp ? "up" : "down"}`;
      }, 3000);
    </script>
  </body>
</html>
